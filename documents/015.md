# 问题描述

SpringBoot 项目（使用Gradle构建）打包成 war 包后需要部署到 Linux 服务器的 Tomcat 上，war 包解压有时正常有时不正常，具体有以下几种情况：
1. 启动 Tomcat 自动解压，结果正常
2. Linux 系统中用 unzip 命令解压，解压一部分文件后报错
3. Windows 系统中用 unzip 命令解压，解压一部分文件后报错
4. Windows 系统中用 WinRAR 打开，预览看到的文件是正常的，但解压一部分文件后报错
5. Mac 系统中用 unzip 命令解压，会有几次询问是否替换文件（这些文件都是 WEB-INF/lib 目录的 jar 文件），全部选择 y 后成功解压
6. Mac 系统中用 The Unarchiver.app 解压，结果正常

# 原因分析

主要从[问题描述](#问题描述)的 5 中的结果分析，应该是因为询问是否替换的这几个文件有多个同名文件，而不同的解压方式发现有多个同名文件时的处理方法也不一样，1 和 6 应该是自动选择了一个，5 则让用户自己选择是否用后解压的替换先解压的，其他的就直接报错

观察到这几个文件都是 jar 文件，而项目是有多模块的，部分子模块有引用项目中的 jar 文件，其中就有同名的

# 解决并验证

将同名的 jar 文件从各自的模块中删除，放到一个公共的文件夹中，修改所在子模块的 build.gradle，引用公共文件夹中的 jar 文件，然后重新打包，用[问题描述](#问题描述)中的 6 种情况进行验证，结果都正常
